<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mini.mapper.CommunityMapper">
	<select id="selectCbrdList" parameterType="hashmap" resultType="com.mini.model.Cbrd">
		SELECT * 
		FROM T3_CBRD
		ORDER BY CBNO DESC, CDATE DESC
		LIMIT #{startNum}, #{lastNum}
	</select>
	
	<select id="selectCbrdListCnt" parameterType="hashmap" resultType="int">
		SELECT
			COUNT(CBNO) AS CBRDCNT
		FROM T3_CBRD
	</select>
	
	<select id="insertCbrd" parameterType="hashmap">
		INSERT INTO mini_db2.T3_CBRD
		VALUES ()
	</select>
	
	<delete id="deleteCbrd" parameterType="hashmap">
		DELETE FROM mini_db2.T3_CBRD
		WHERE BOARD_NO = #{boardKey}
	</delete>
	
	<select id="getCbrd" parameterType="hashmap" resultType="com.mini.model.Cbrd">
		SELECT
			CBNO,
			ID,
			CATE1,
			CATE2,
			CTITLE,
			CCONT,
			CDATE,
			HITS
		FROM T3_CBRD
		WHERE CBNO = #{CBNO}
	</select>
	
	<update id="updateCbrd" parameterType="hashmap">
		UPDATE T3_CBRD
		SET
			CTITLE = #{title},
			CCONT = #{content},
			UDATE = SYSDATE
		WHERE CBNO = #{CBNO}
	</update>
	
	<update id="updateCbrdCnt" parameterType="hashmap">
		UPDATE T3_CBRD
		SET
			HITS = HITS + 1
		WHERE CBNO = #{CBNO}
		
	</update>
	
</mapper>