<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mini.mapper.MypageMapper">

	<!-- 아이디/주소 내역 받아오기 -->
	<select id="selectUserInfo" parameterType="hashmap" resultType="com.mini.model.Mypg">
		SELECT *
			FROM T3_USER
			LEFT JOIN T3_PROF ON T3_USER.ID = T3_PROF.ID
			LEFT JOIN T3_CMRE ON T3_USER.ID = T3_CMRE.ID
			LEFT JOIN T3_JJIM ON T3_USER.ID = T3_JJIM.ID
			
		where T3_USER.ID = #{id}
	</select>
	 
	<!-- 프로필 하단 정보 수정/업데이트 -->
	<update id="updateMyPage" parameterType="hashmap">
		UPDATE T3_USER 
		SET
		 PHONE = #{phone}
		 ,EMAIL = #{email}
		 ,ADDR = #{addr}
		<if test="passwd != '' and passwd != null">
				, PASSWD = #{passwd}
			</if>
		WHERE ID = #{id}
	</update>
	
	<!-- 프로필 상단 업데이트 -->
	<update id="updateUppro" parameterType="hashmap">
		UPDATE T3_PROF                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
		SET
		INTRO = #{intro},
		PINFO = #{pinfo},
		CINTRO = #{cintro}
		WHERE ID = #{id}
	</update>
	
	<!-- 크리에이터 닉네임 -->
	<update id="insCreadd" parameterType="hashmap">
		UPDATE T3_USER
		SET
		CRENICK = #{crenick}
		WHERE ID = #{id}
	</update>
	<!-- 크리에이터 포트폴리오 -->
	<update id="insCreimg" parameterType="hashmap">
		UPDATE T3_CREIMG
		SET
		CREPATHNO = #{crepathno}
		WHERE ID = #{id}
	</update>
	<!-- 크리에이터등록요청 작성내용 -->
	<update id="insCrebor" parameterType="hashmap">
		UPDATE T3_CREBRD
		SET
		CRECONT = #{crecont}
		WHERE ID = #{id}
	</update>

	<!-- 후기 불러오기 -->
	<select id="selectHugi" parameterType="hashmap" resultType="com.mini.model.Mypg">
			SELECT 
			ID,
			TBNO,
			RECONTE,
			FROM T3_TBRD
			LEFT JOIN T3_TBRD ON T3_TBRD.TBNO = T3_CMRE.TBNO
			WHERE ID = #{id}
	</select>
	

	
</mapper>