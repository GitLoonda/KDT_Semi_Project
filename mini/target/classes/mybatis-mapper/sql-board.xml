<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mini.mapper.BoardMapper">
	<select id="selectUserlist" parameterType="hashmap" resultType="com.mini.model.User">
	SELECT
		ID,
		PASSWD,
		NAME,
		NICK,
		GENDER,
		BIRTH,
		PHONE,
		EMAIL,
		ADDR,
		GRADE,
		CGRADE,
		POINT,
		BANCNT1,
		BANCNT2,
		PWCONT,
		AUTH1YN,
		AUTH2YN,
		CREAFLG,
		ADMINFLG,
		USTATUS
	FROM T3_USER
	</select>
<!-- 게시글 리스트 -->
<select id="selectTbrdListInfo" parameterType="hashmap" resultType="com.mini.model.TbrdList">
	SELECT
		B.TBNO AS TBNO,
		ID,
		BPRICE,
		BTITLE,
		HITS,
		LIKES,
		D1.CINFO AS BRDNAME,
		D2.CINFO AS KINDNAME,
		D3.CINFO AS CATE1NAME,
		D4.CINFO AS CATE2NAME,
		D5.CINFO AS CATE3NAME,
		D7.CINFO AS BSTATUSNAME,
		T1.PATH AS PATH,
		CDATE,
		UDATE,
		DELYN
	FROM T3_TBRD B
	INNER JOIN T3_DESC D1 ON B.BRDFLG = D1.CNUM
	INNER JOIN T3_DESC D2 ON B.KIND = D2.CNUM
	INNER JOIN T3_DESC D3 ON B.CATE1 = D3.CNUM
	INNER JOIN T3_DESC D4 ON B.CATE2 = D4.CNUM
	INNER JOIN T3_DESC D5 ON B.CATE3 = D5.CNUM
	INNER JOIN T3_DESC D7 ON B.BSTATUS = D7.CNUM
	LEFT JOIN (SELECT TBNO,PATH,REP FROM T3_TIMG WHERE REP='Y') T1 ON B.TBNO = T1.TBNO
	ORDER BY TBNO ASC LIMIT #{startNum}, #{lastNum}
	
</select>
<!-- 게시글 상세 -->
<select id="selectTbrdInfo" parameterType="hashmap" resultType="com.mini.model.TbrdList">
	SELECT
		B.TBNO AS TBNO,
		ID,
		BPRICE,
		BTITLE,
		BCONT,
		HITS,
		LIKES,
		D1.CINFO AS BRDNAME,
		D2.CINFO AS KINDNAME,
		D3.CINFO AS CATE1NAME,
		D4.CINFO AS CATE2NAME,
		D5.CINFO AS CATE3NAME,
		D6.CINFO AS BPRODNAME,
		D7.CINFO AS BPROSNAME,
		D8.CINFO AS BSTATUSNAME,
		D9.CINFO AS BPURNAME,
		D10.CINFO AS BBOXNAME,
		D11.CINFO AS BRCPTNAME,
		D12.CINFO AS BCMSNAME,
		D13.CINFO AS LOCAL1NAME,
		D14.CINFO AS LOCAL2NAME,
		D15.CINFO AS LOCAL3NAME,
		T1.PATH AS PATH,
		CDATE,
		UDATE,
		DELYN
	FROM T3_TBRD B
	INNER JOIN T3_DESC D1 ON B.BRDFLG = D1.CNUM
	INNER JOIN T3_DESC D2 ON B.KIND = D2.CNUM
	INNER JOIN T3_DESC D3 ON B.CATE1 = D3.CNUM
	INNER JOIN T3_DESC D4 ON B.CATE2 = D4.CNUM
	INNER JOIN T3_DESC D5 ON B.CATE3 = D5.CNUM
	INNER JOIN T3_DESC D6 ON B.BPROD = D6.CNUM
	INNER JOIN T3_DESC D7 ON B.BSTATUS = D7.CNUM
	INNER JOIN T3_DESC D8 ON B.BPROD = D8.CNUM
	INNER JOIN T3_DESC D9 ON B.BPROS = D8.CNUM
	INNER JOIN T3_DESC D10 ON B.BBOX = D9.CNUM
	INNER JOIN T3_DESC D11 ON B.BRCPT = D10.CNUM
	LEFT JOIN T3_DESC D12 ON B.BCMS = D11.CNUM
	LEFT JOIN T3_DESC D13 ON B.LOCAL1 = D12.CNUM
	LEFT JOIN T3_DESC D14 ON B.LOCAL2 = D13.CNUM
	LEFT JOIN T3_DESC D15 ON B.LOCAL3 = D14.CNUM
	LEFT JOIN (SELECT TBNO,PATH,REP FROM T3_TIMG WHERE REP='Y') T1 ON B.TBNO = T1.TBNO
	ORDER BY TBNO DESC;
</select>

<select id="selectTbrdListCnt" parameterType="hashmap" resultType="int">
	SELECT
		COUNT(TBNO) AS TBRDCNT
	FROM T3_TBRD;
</select>

<!-- 카테고리 리스트  -->
<select id="selectTbrdListbrdf" parameterType="hashmap" resultType="com.mini.model.DescList">
	SELECT 
		CNUM,
		CINFO
	FROM T3_DESC WHERE CID="BRDFLG"

</select>
<select id="selectTbrdListkindf" parameterType="hashmap" resultType="com.mini.model.DescList">
	SELECT 
		CNUM,
		CINFO
	FROM T3_DESC WHERE CID="KIND"

</select>
<select id="selectTbrdListcate1" parameterType="hashmap" resultType="com.mini.model.DescList">
	SELECT 
		CNUM,
		CINFO
	FROM T3_DESC WHERE CID="CATE1"

</select>
<select id="selectTbrdListcate2" parameterType="hashmap" resultType="com.mini.model.DescList">
	SELECT 
		CNUM,
		CINFO,
		PCOMM1
	FROM T3_DESC WHERE CID="CATE2"

</select>
<select id="selectTbrdListcate3" parameterType="hashmap" resultType="com.mini.model.DescList">
	SELECT 
		CNUM,
		CINFO
	FROM T3_DESC WHERE CID="CATE3"

</select>
<!-- <select id="selectTbrdListlocal1" parameterType="hashmap" resultType="com.mini.model.TbrdList">
SELECT 
	CNUM,
	CINFO
FROM T3_DESC WHERE CID="LOCAL1"

</select>
<select id="selectTbrdListlocal2" parameterType="hashmap" resultType="com.mini.model.TbrdList">
SELECT 
	CNUM,
	CINFO
FROM T3_DESC WHERE CID="LOCAL2"

</select>
<select id="selectTbrdListlocal3" parameterType="hashmap" resultType="com.mini.model.TbrdList">
SELECT 
	CNUM,
	CINFO
FROM T3_DESC WHERE CID="LOCAL3"
</select> -->


</mapper>