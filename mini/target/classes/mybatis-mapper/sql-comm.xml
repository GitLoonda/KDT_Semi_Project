<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mini.mapper.CommunityMapper">
	<select id="selectCbrdList" parameterType="hashmap" resultType="com.mini.model.Cbrd">
		SELECT * 
		FROM (
			SELECT @ROWNUM := @ROWNUM + 1 AS RN, T3_CBRD .*
			FROM mini_db2.T3_CBRD, (SELECT @ROWNUM :=0) TMP
			ORDER BY CDATE ASC 
			) SUB
		ORDER BY SUB.RN DESC
		
		
	</select>
	
	<select id="selectCbrdListCnt" parameterType="hashmap" resultType="int">
		SELECT
			COUNT(CBNO) AS CBRDCNT
		FROM mini_db2.T3_CBRD
	</select>
	
	<select id="insertCbrd" parameterType="hashmap">
		INSERT INTO mini_db2.T3_CBRD
		VALUES ()
	</select>
	
	<delete id="deleteCbrd" parameterType="hashmap">
		DELETE FROM mini_db2.T3_CBRD
		WHERE BOARD_NO = #{boradKey}
	</delete>
	
	<select id="getCbrd" parameterType="hashmap" resultType="com.mini.model.Cbrd">
		SELECT
			CBNO,
			ID,
			CATE1,
			CATE2,
			CTITLE,
			CCONT,
			CDATE,
			HITS
		FROM mini_db2.T3_CBRD
		WHERE CBNO = #{CBNO}
	</select>
	
	<update id="updateCbrd" parameterType="hashmap">
		UPDATE mini_db2.T3_CBRD
		SET
			CTITLE = #{title},
			CCONT = #{content},
			UDATE = SYSDATE
		WHERE CBNO = #{CBNO}
	</update>
	
	<update id="updateCbrdCnt" parameterType="hashmap">
		UPDATE mini_db2.T3_CBRD
		SET
			HITS = HITS + 1
		WHERE CBNO = #{CBNO}
		
	</update>
	
</mapper>